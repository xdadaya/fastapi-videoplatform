Задание на фастапи

Написать видео-платформу. Есть две главные сущности - “Пользователь” и “Видео”. Также дополнительно есть сущности "Категория", "Комментарий". Пользователи выкладывают видео и могут комментировать свои и чужие видео. Комментарии не вложенные (нельзя ответить на комментарий другого пользователя), но можно поднять оценку комментария или опустить (банально лайки). Под видео сделать возможность сортировки комментариев по дате опубликования и ~~по рейтингу~~. Также должна быть видна статистика.
 - количество опубликованных комментариев.
 - средний рейтинг комментариев.
 - средняя длина сообщения в комментарии.
 - среднее количество комментариев под видео

Технические детали:
 1. Для сущностей использовать бд PostgreSQL.
  * Для миграций использовать alembic.
  * Использовать паттерн “репозиторий” для работы с базой.
  * Сделать soft delete.
 2. Статистику нужно хранить в MongoDB.
 3. Для сбора статистики можно использовать Celery.
 4. Все должно быть реализовано на FastAPI, используя все встроенные возможности (Dependency Injection, Pydantic Models, exception handlers, middlewares).
 5. Аутентификация по jwt (можно написать свою, можно использовать готовое решение для фастапи - fastapi_jwt).
 6. На каждый эндпоинт должно быть две модели. Например, на эндпоинт create_user должны использовать модели CreateUserResponse и CreateUserRequest.
 7. Вся работа с базой данной должна быть АСИНХРОННА (motor для монги и asyncpg для постгреса).
 8. Иметь покрытия тестами хотя-бы эндпоинты (в идеале и unit использовать).
 9. Использовать линтеры (pylint, mypy, flake8) и форматтеры (black или другой какой нравится).
 10. Сделать CI используя Github actions. 
 11. Использовать pre-commit для прогона линтеров локально перед коммитом. 
 12. Сделать возможность переводить приложение в maintaince mode и прописать healthcheck приложения и баз. 
 13. Сами файлы видео можно хранить на S3, Google drive или любом другом аналогe cloud storage.